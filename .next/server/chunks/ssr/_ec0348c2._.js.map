{"version":3,"sources":["../../../../src/lib/actions/theme.ts","../../../../src/lib/actions/static-pages.ts","../../../../.next-internal/server/app/profil/page/actions.js%20%28server%20actions%20loader%29"],"sourcesContent":["'use server';\r\n\r\nimport { createClient } from '@/lib/supabase/server';\r\nimport { revalidatePath } from 'next/cache';\r\n\r\nexport interface ThemeSettings {\r\n    primary_color: string;\r\n    secondary_color: string;\r\n    accent_color: string;\r\n    background_color: string;\r\n    foreground_color: string;\r\n    heading_font: string;\r\n    body_font: string;\r\n    border_radius: string;\r\n    sidebar_style: string;\r\n}\r\n\r\nexport async function getTheme(): Promise<ThemeSettings | null> {\r\n    const supabase = createClient();\r\n\r\n    const { data, error } = await supabase\r\n        .from('website_themes')\r\n        .select('*')\r\n        .eq('key', 'default')\r\n        .single();\r\n\r\n    if (error) {\r\n        console.error('Error fetching theme:', error);\r\n        return null;\r\n    }\r\n\r\n    return data as ThemeSettings;\r\n}\r\n\r\nexport async function updateTheme(theme: Partial<ThemeSettings>) {\r\n    const supabase = createClient();\r\n\r\n    const { data: { user } } = await supabase.auth.getUser();\r\n\r\n    if (!user) {\r\n        throw new Error('Unauthorized');\r\n    }\r\n\r\n    const { error } = await supabase\r\n        .from('website_themes')\r\n        .update({\r\n            ...theme,\r\n            updated_by: user.id,\r\n            updated_at: new Date().toISOString(),\r\n        })\r\n        .eq('key', 'default');\r\n\r\n    if (error) {\r\n        throw new Error(error.message);\r\n    }\r\n\r\n    // Revalidate all pages to apply new theme\r\n    revalidatePath('/', 'layout');\r\n\r\n    return { success: true };\r\n}\r\n\r\n","\"use server\";\r\n\r\nimport { createClient } from \"@/lib/supabase/server\";\r\nimport { revalidatePath } from \"next/cache\";\r\n\r\nexport interface StaticPage {\r\n    id: string;\r\n    slug: string;\r\n    title: string;\r\n    meta_description?: string;\r\n    hero_image?: string;\r\n    hero_title?: string;\r\n    hero_subtitle?: string;\r\n    content: any[]; // JSONB content sections\r\n    is_published: boolean;\r\n    updated_by?: string;\r\n    created_at: string;\r\n    updated_at: string;\r\n}\r\n\r\nexport async function getStaticPage(slug: string) {\r\n    const supabase = createClient();\r\n\r\n    const { data, error } = await supabase\r\n        .from(\"static_pages\")\r\n        .select(\"*\")\r\n        .eq(\"slug\", slug)\r\n        .eq(\"is_published\", true)\r\n        .single();\r\n\r\n    if (error) {\r\n        console.error(\"Error fetching static page:\", error);\r\n        return null;\r\n    }\r\n\r\n    return data as StaticPage;\r\n}\r\n\r\nexport async function getStaticPageForEdit(slug: string) {\r\n    const supabase = createClient();\r\n\r\n    const { data, error } = await supabase\r\n        .from(\"static_pages\")\r\n        .select(\"*\")\r\n        .eq(\"slug\", slug)\r\n        .single();\r\n\r\n    if (error) {\r\n        console.error(\"Error fetching static page:\", error);\r\n        return null;\r\n    }\r\n\r\n    return data as StaticPage;\r\n}\r\n\r\nexport async function updateStaticPage(slug: string, formData: FormData) {\r\n    const supabase = createClient();\r\n\r\n    // Get current user\r\n    const { data: { user } } = await supabase.auth.getUser();\r\n    if (!user) throw new Error(\"Not authenticated\");\r\n\r\n    const title = formData.get(\"title\") as string;\r\n    const meta_description = formData.get(\"meta_description\") as string;\r\n    const hero_image = formData.get(\"hero_image\") as string;\r\n    const hero_title = formData.get(\"hero_title\") as string;\r\n    const hero_subtitle = formData.get(\"hero_subtitle\") as string;\r\n    const content = formData.get(\"content\") as string;\r\n    const is_published = formData.get(\"is_published\") === \"true\";\r\n\r\n    const { data, error } = await supabase\r\n        .from(\"static_pages\")\r\n        .update({\r\n            title,\r\n            meta_description,\r\n            hero_image,\r\n            hero_title,\r\n            hero_subtitle,\r\n            content: content ? JSON.parse(content) : [],\r\n            is_published,\r\n            updated_by: user.id,\r\n            updated_at: new Date().toISOString(),\r\n        })\r\n        .eq(\"slug\", slug)\r\n        .select()\r\n        .single();\r\n\r\n    if (error) {\r\n        console.error(\"Error updating static page:\", error);\r\n        throw new Error(error.message);\r\n    }\r\n\r\n    revalidatePath(`/${slug}`);\r\n    revalidatePath(\"/dashboard/website/pages\");\r\n    return data;\r\n}\r\n","export {getTheme as '002c3c1ba4b3794b9f598d4bc16943f4eb8e725167'} from 'ACTIONS_MODULE0'\nexport {updateTheme as '4084d33582ac0f3f4293cc9841885d69efd70d0a7f'} from 'ACTIONS_MODULE0'\nexport {getStaticPage as '404f26c15c396bc2c990f4d8236b6d1d864bf3487c'} from 'ACTIONS_MODULE1'\nexport {getStaticPageForEdit as '40596f6608517bd774296ed716137627686571bf84'} from 'ACTIONS_MODULE1'\nexport {updateStaticPage as '607771fe7f18db254a7370aba32ef508918b565a4f'} from 'ACTIONS_MODULE1'\n"],"names":[],"mappings":"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"}