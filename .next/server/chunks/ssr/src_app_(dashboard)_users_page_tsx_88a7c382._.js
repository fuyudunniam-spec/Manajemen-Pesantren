module.exports=[12203,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(77687),e=a.i(91119),f=a.i(99570),g=a.i(17371),h=a.i(87532),i=a.i(81464),j=a.i(70106);let k=(0,j.default)("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]),l=(0,j.default)("Key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]]);var m=a.i(24569);let n=(0,j.default)("Power",[["path",{d:"M12 2v10",key:"mnfbl"}],["path",{d:"M18.4 6.6a9 9 0 1 1-12.77.04",key:"obofu9"}]]),o=(0,j.default)("PowerOff",[["path",{d:"M18.36 6.64A9 9 0 0 1 20.77 15",key:"dxknvb"}],["path",{d:"M6.16 6.16a9 9 0 1 0 12.68 12.68",key:"1x7qb5"}],["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);var p=a.i(81560),q=a.i(50944),r=a.i(66718),s=a.i(33508);function t({roles:a,onClose:g,onSuccess:h}){let[i,j]=(0,c.useState)(!1),[k,l]=(0,c.useState)(null),[m,n]=(0,c.useState)(a||[]),[o,p]=(0,c.useState)(!1);(0,q.useRouter)();let t=(0,d.createClient)();async function u(a){a.preventDefault(),j(!0),l(null);let b=new FormData(a.currentTarget),c=b.get("email")?.trim().toLowerCase(),d=b.get("password"),e=b.get("fullName")?.trim(),f=b.get("roleId");if(!c||!c.includes("@")){l("Email tidak valid. Pastikan format email benar (contoh: user@example.com)"),j(!1);return}if(!d||d.length<6){l("Password minimal 6 karakter"),j(!1);return}if(!e||e.length<2){l("Nama lengkap minimal 2 karakter"),j(!1);return}if(!f){l("Silakan pilih role untuk user ini."),j(!1);return}try{let{data:a,error:b}=await t.auth.signUp({email:c,password:d,options:{data:{full_name:e},emailRedirectTo:void 0}});if(b){console.error("Auth Error:",b),b.message.includes("invalid")||b.message.includes("Email address")?l("Format email tidak valid. Pastikan email menggunakan format yang benar (contoh: user@example.com)"):b.message.includes("already registered")||b.message.includes("already exists")?l("Email ini sudah terdaftar. Gunakan email lain."):b.message.includes("password")?l("Password tidak memenuhi syarat. Minimal 6 karakter."):l(b.message||"Gagal membuat user. Silakan coba lagi."),j(!1);return}if(a.user){let{error:b}=await t.from("profiles").insert({id:a.user.id,full_name:e,role_id:f,is_active:!0});if(b){console.error("Profile Error:",b),l("Gagal membuat profil: "+b.message),j(!1);return}h(),g()}else l("Gagal membuat user. User mungkin perlu konfirmasi email terlebih dahulu."),j(!1)}catch(a){console.error("Exception in handleSubmit:",a),l(a.message||"Terjadi kesalahan. Silakan coba lagi."),j(!1)}}return(0,c.useEffect)(()=>{!async function(){if(a&&0!==a.length)n(a);else{p(!0);try{let{data:a,error:b}=await t.from("roles").select("id, name, slug, description").order("created_at",{ascending:!0});b?(console.error("Error fetching roles in modal:",b),l("Gagal memuat daftar role. Silakan refresh halaman."),n([])):(console.log("Roles loaded in modal:",a),n(a||[]),l(null))}catch(a){console.error("Exception fetching roles:",a),l("Terjadi kesalahan saat memuat role."),n([])}finally{p(!1)}}}()},[]),(0,b.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm",children:(0,b.jsxs)(e.Card,{className:"w-full max-w-lg glass-card relative overflow-hidden border-slate-200/80 shadow-xl",children:[(0,b.jsx)("button",{onClick:g,className:"absolute top-4 right-4 z-10 text-slate-500 hover:text-slate-700 transition-colors",children:(0,b.jsx)(s.X,{className:"w-5 h-5"})}),(0,b.jsxs)(e.CardHeader,{className:"bg-gradient-to-r from-emerald-600 to-emerald-700 text-white",children:[(0,b.jsx)("h2",{className:"text-xl font-display font-bold",children:"Tambah User Baru"}),(0,b.jsx)("p",{className:"text-emerald-50 text-xs mt-1",children:"Daftarkan personil baru ke sistem e-Maktab"})]}),(0,b.jsx)(e.CardContent,{className:"bg-white",children:(0,b.jsxs)("form",{onSubmit:u,className:"space-y-5",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{className:"text-xs font-semibold text-slate-700 uppercase tracking-wide",children:"Nama Lengkap"}),(0,b.jsx)(r.Input,{name:"fullName",placeholder:"Contoh: Ahmad Fauzan",required:!0,className:"bg-white border-slate-300 text-slate-900 placeholder:text-slate-400 focus:border-emerald-600 focus:ring-emerald-600/20"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{className:"text-xs font-semibold text-slate-700 uppercase tracking-wide",children:"Email"}),(0,b.jsx)(r.Input,{name:"email",type:"email",placeholder:"email@example.com",required:!0,className:"bg-white border-slate-300 text-slate-900 placeholder:text-slate-400 focus:border-emerald-600 focus:ring-emerald-600/20"})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{className:"text-xs font-semibold text-slate-700 uppercase tracking-wide",children:"Role"}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsxs)("select",{name:"roleId",className:"w-full h-11 bg-white border border-slate-300 rounded-lg px-4 pr-10 text-sm text-slate-900 focus:outline-none focus:border-emerald-600 focus:ring-2 focus:ring-emerald-600/20 appearance-none cursor-pointer shadow-sm disabled:opacity-50 disabled:cursor-not-allowed",required:!0,disabled:o,children:[(0,b.jsx)("option",{value:"",className:"text-slate-500",children:o?"Memuat role...":"Pilih Role"}),m&&m.length>0?m.map(a=>(0,b.jsx)("option",{value:a.id,className:"text-slate-900",children:a.name},a.id)):!o&&(0,b.jsx)("option",{value:"",disabled:!0,className:"text-slate-500",children:"Tidak ada role tersedia"})]}),(0,b.jsx)("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none text-slate-500",children:(0,b.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,b.jsx)("path",{d:"m6 9 6 6 6-6"})})})]}),o&&(0,b.jsxs)("p",{className:"text-xs text-amber-600 mt-1 flex items-center gap-1",children:[(0,b.jsx)("span",{className:"animate-spin inline-block w-3 h-3 border border-amber-600 border-t-transparent rounded-full"}),"Memuat daftar role..."]}),!o&&(!m||0===m.length)&&(0,b.jsx)("p",{className:"text-xs text-red-600 mt-1",children:"⚠️ Tidak ada role tersedia. Pastikan RLS policy sudah dikonfigurasi."})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{className:"text-xs font-semibold text-slate-700 uppercase tracking-wide",children:"Password"}),(0,b.jsx)(r.Input,{name:"password",type:"password",placeholder:"••••••••",required:!0,minLength:6,className:"bg-white border-slate-300 text-slate-900 placeholder:text-slate-400 focus:border-emerald-600 focus:ring-emerald-600/20"})]})]}),k&&(0,b.jsx)("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm",children:k}),(0,b.jsxs)("div",{className:"flex justify-end gap-3 pt-6 border-t border-slate-200",children:[(0,b.jsx)(f.Button,{type:"button",variant:"ghost",onClick:g,className:"text-slate-700 hover:text-slate-900 hover:bg-slate-100",children:"Batal"}),(0,b.jsx)(f.Button,{type:"submit",variant:"gold",disabled:i||o||!m||0===m.length,children:i?"Menyimpan...":"Simpan User"})]})]})})]})})}function u({user:a,roles:g,onClose:h,onSuccess:i}){let[j,k]=(0,c.useState)(!1),[l,m]=(0,c.useState)(null),[n,o]=(0,c.useState)(g||[]),p=(0,d.createClient)();async function q(b){b.preventDefault(),k(!0),m(null);let c=new FormData(b.currentTarget),d=c.get("fullName")?.trim(),e=c.get("roleId");if(!d||d.length<2){m("Nama lengkap minimal 2 karakter"),k(!1);return}if(!e){m("Silakan pilih role untuk user ini."),k(!1);return}try{let{error:b}=await p.from("profiles").update({full_name:d,role_id:e,updated_at:new Date().toISOString()}).eq("id",a.id);if(b){console.error("Update Error:",b),m("Gagal mengupdate user: "+b.message),k(!1);return}i(),h()}catch(a){console.error("Exception in handleSubmit:",a),m(a.message||"Terjadi kesalahan. Silakan coba lagi."),k(!1)}}return(0,c.useEffect)(()=>{g&&g.length>0&&o(g)},[g]),(0,b.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm",children:(0,b.jsxs)(e.Card,{className:"w-full max-w-lg glass-card relative overflow-hidden border-slate-200/80 shadow-xl",children:[(0,b.jsx)("button",{onClick:h,className:"absolute top-4 right-4 z-10 text-slate-500 hover:text-slate-700 transition-colors",children:(0,b.jsx)(s.X,{className:"w-5 h-5"})}),(0,b.jsxs)(e.CardHeader,{className:"bg-gradient-to-r from-emerald-600 to-emerald-700 text-white",children:[(0,b.jsx)("h2",{className:"text-xl font-display font-bold",children:"Edit User"}),(0,b.jsxs)("p",{className:"text-emerald-50 text-xs mt-1",children:["Ubah informasi user ",a?.full_name||""]})]}),(0,b.jsx)(e.CardContent,{className:"bg-white",children:(0,b.jsxs)("form",{onSubmit:q,className:"space-y-5",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{className:"text-xs font-semibold text-slate-700 uppercase tracking-wide",children:"Nama Lengkap"}),(0,b.jsx)(r.Input,{name:"fullName",defaultValue:a?.full_name||"",placeholder:"Contoh: Ahmad Fauzan",required:!0,className:"bg-white border-slate-300 text-slate-900 placeholder:text-slate-400 focus:border-emerald-600 focus:ring-emerald-600/20"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{className:"text-xs font-semibold text-slate-700 uppercase tracking-wide",children:"Role"}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsxs)("select",{name:"roleId",defaultValue:a?.role_id||"",className:"w-full h-11 bg-white border border-slate-300 rounded-lg px-4 pr-10 text-sm text-slate-900 focus:outline-none focus:border-emerald-600 focus:ring-2 focus:ring-emerald-600/20 appearance-none cursor-pointer shadow-sm",required:!0,children:[(0,b.jsx)("option",{value:"",className:"text-slate-500",children:"Pilih Role"}),n&&n.length>0?n.map(a=>(0,b.jsx)("option",{value:a.id,className:"text-slate-900",children:a.name},a.id)):(0,b.jsx)("option",{value:"",disabled:!0,className:"text-slate-500",children:"Tidak ada role tersedia"})]}),(0,b.jsx)("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none text-slate-500",children:(0,b.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,b.jsx)("path",{d:"m6 9 6 6 6-6"})})})]})]}),l&&(0,b.jsx)("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm",children:l}),(0,b.jsxs)("div",{className:"flex justify-end gap-3 pt-6 border-t border-slate-200",children:[(0,b.jsx)(f.Button,{type:"button",variant:"ghost",onClick:h,className:"text-slate-700 hover:text-slate-900 hover:bg-slate-100",children:"Batal"}),(0,b.jsx)(f.Button,{type:"submit",variant:"gold",disabled:j,children:j?"Menyimpan...":"Simpan Perubahan"})]})]})})]})})}var v=a.i(87534),w=a.i(48124),x=a.i(68114);let y=[{slug:"keuangan",name:"Keuangan",description:"Tabungan, SPP, & Pembayaran"},{slug:"akademik",name:"Akademik",description:"Kurikulum & Data Nilai"},{slug:"donasi",name:"Donasi",description:"Manajemen Donatur & Infaq"},{slug:"inventory",name:"Inventory",description:"Aset & Inventaris Pondok"},{slug:"kesehatan",name:"Kesehatan",description:"Catatan Medis Santri"}];function z({user:a,onClose:g,onSuccess:h}){let[i,j]=(0,c.useState)([]),[k,l]=(0,c.useState)(!0),[m,n]=(0,c.useState)(!1),o=(0,d.createClient)();(0,c.useEffect)(()=>{a&&async function(){l(!0);let{data:b}=await o.from("user_permissions").select("permissions(slug)").eq("user_id",a.id);b?j(b.map(a=>a.permissions.slug)):j([]),l(!1)}()},[a]);let p=async()=>{if(!a)return;n(!0),await o.from("user_permissions").delete().eq("user_id",a.id);let{data:b}=await o.from("permissions").select("id, slug").in("slug",i);if(b&&b.length>0){let c=b.map(b=>({user_id:a.id,permission_id:b.id}));await o.from("user_permissions").insert(c)}n(!1),h(),g()};return(0,b.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm",children:(0,b.jsxs)(e.Card,{className:"w-full max-w-2xl glass-card relative overflow-hidden flex flex-col max-h-[90vh] border-slate-200/80 shadow-xl",children:[(0,b.jsx)("button",{onClick:g,className:"absolute top-4 right-4 z-10 text-slate-500 hover:text-slate-700 transition-colors",children:(0,b.jsx)(s.X,{className:"w-5 h-5"})}),(0,b.jsxs)(e.CardHeader,{className:"bg-gradient-to-r from-emerald-600 to-emerald-700 text-white",children:[(0,b.jsx)("h2",{className:"text-xl font-display font-bold",children:"Atur Hak Akses"}),(0,b.jsxs)("p",{className:"text-emerald-50 text-xs mt-1",children:["Kelola akses modul untuk ",a?.full_name||"User"]})]}),(0,b.jsx)(e.CardContent,{className:"overflow-y-auto flex-1 bg-white",children:k?(0,b.jsx)("div",{className:"flex items-center justify-center py-10",children:(0,b.jsx)("div",{className:"animate-spin w-6 h-6 border-2 border-emerald-600 border-t-transparent rounded-full"})}):(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:y.map(a=>{let c=i.includes(a.slug);return(0,b.jsxs)("button",{onClick:()=>{var b;return b=a.slug,void j(a=>a.includes(b)?a.filter(a=>a!==b):[...a,b])},className:(0,x.cn)("flex items-start gap-3 p-4 rounded-lg border-2 transition-all text-left group shadow-sm",c?"bg-amber-50 border-amber-300 text-slate-900 hover:bg-amber-100":"bg-white border-slate-200 text-slate-700 hover:border-slate-300 hover:bg-slate-50"),children:[(0,b.jsx)("div",{className:"mt-0.5",children:c?(0,b.jsx)(v.CheckSquare,{className:"w-5 h-5 text-amber-600"}):(0,b.jsx)(w.Square,{className:"w-5 h-5 text-slate-400 group-hover:text-slate-600"})}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("p",{className:(0,x.cn)("text-sm font-semibold mb-1",c?"text-amber-900":"text-slate-900"),children:a.name}),(0,b.jsx)("p",{className:"text-xs text-slate-600 leading-relaxed",children:a.description})]})]},a.slug)})})}),(0,b.jsxs)("div",{className:"p-6 border-t border-slate-200 bg-slate-50 flex justify-end gap-3",children:[(0,b.jsx)(f.Button,{variant:"ghost",onClick:g,className:"text-slate-700 hover:text-slate-900 hover:bg-slate-100",children:"Batal"}),(0,b.jsx)(f.Button,{variant:"gold",onClick:p,disabled:m||k,children:m?"Menyimpan...":"Simpan Perubahan"})]})]})})}function A(){let[a,j]=(0,c.useState)([]),[q,r]=(0,c.useState)([]),[s,v]=(0,c.useState)(!0),[w,x]=(0,c.useState)(!1),[y,A]=(0,c.useState)(null),[C,D]=(0,c.useState)(null),[E,F]=(0,c.useState)(null),G=(0,c.useRef)({}),H=(0,d.createClient)();async function I(){v(!0);try{let{data:a,error:b}=await H.from("profiles").select("*, roles(*)").order("created_at",{ascending:!1});b?console.error("Error fetching profiles:",b):j(a||[]);let{data:c,error:d}=await H.from("roles").select("id, name, slug, description").order("created_at",{ascending:!0});d?(console.error("Error fetching roles:",d),console.error("Role error details:",JSON.stringify(d,null,2)),r([])):(console.log("Roles fetched successfully:",c),r(c||[]))}catch(a){console.error("Error in fetchData:",a)}finally{v(!1)}}async function J(){let{data:a,error:b}=await H.from("roles").select("id, name, slug, description").order("created_at",{ascending:!0});return b?(console.error("Error fetching roles:",b),[]):a||[]}async function K(a){try{let{error:b}=await H.from("profiles").update({is_active:!a.is_active,updated_at:new Date().toISOString()}).eq("id",a.id);b?(console.error("Error toggling user status:",b),alert("Gagal mengubah status user: "+b.message)):(I(),F(null))}catch(a){console.error("Exception toggling user status:",a),alert("Terjadi kesalahan saat mengubah status user")}}async function L(a){if(confirm(`Apakah Anda yakin ingin menghapus user "${a.full_name}"?`))try{let{error:b}=await H.from("profiles").update({is_active:!1,updated_at:new Date().toISOString()}).eq("id",a.id);b?(console.error("Error deleting user:",b),alert("Gagal menghapus user: "+b.message)):(I(),F(null))}catch(a){console.error("Exception deleting user:",a),alert("Terjadi kesalahan saat menghapus user")}}return(0,c.useEffect)(()=>{I()},[]),(0,c.useEffect)(()=>{function a(a){Object.keys(G.current).forEach(b=>{let c=G.current[b];c&&!c.contains(a.target)&&F(null)})}return document.addEventListener("mousedown",a),()=>document.removeEventListener("mousedown",a)},[]),(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl font-display font-bold text-slate-900",children:"Manajemen User"}),(0,b.jsx)("p",{className:"text-slate-600 mt-1",children:"Kelola role dan izin akses semua pengguna e-Maktab"})]}),(0,b.jsxs)(f.Button,{variant:"gold",className:"gap-2",onClick:async()=>{0===q.length&&r(await J()),x(!0)},children:[(0,b.jsx)(g.UserPlus,{className:"w-4 h-4"}),(0,b.jsx)("span",{children:"User Baru"})]})]}),(0,b.jsxs)(e.Card,{className:"glass-card",children:[(0,b.jsxs)(e.CardHeader,{className:"flex flex-row items-center justify-between",children:[(0,b.jsxs)("div",{className:"relative w-full max-w-sm",children:[(0,b.jsx)(h.Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-500"}),(0,b.jsx)("input",{type:"text",placeholder:"Cari nama, email, atau ID Santri...",className:"w-full bg-white border border-slate-300 rounded-lg py-2.5 pl-10 pr-4 text-sm focus:outline-none focus:border-emerald-600 focus:ring-2 focus:ring-emerald-600/20 text-slate-900 placeholder:text-slate-500 shadow-sm"})]}),(0,b.jsxs)(f.Button,{variant:"ghost",className:"gap-2 text-slate-700 hover:bg-slate-100 hover:text-slate-900",children:[(0,b.jsx)(i.Filter,{className:"w-4 h-4"}),(0,b.jsx)("span",{children:"Filter"})]})]}),(0,b.jsx)(e.CardContent,{className:"p-0",children:(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)("table",{className:"w-full text-left",children:[(0,b.jsx)("thead",{children:(0,b.jsxs)("tr",{className:"border-b border-slate-200 bg-slate-50",children:[(0,b.jsx)("th",{className:"px-6 py-4 text-xs font-semibold text-slate-700 uppercase tracking-wider",children:"User"}),(0,b.jsx)("th",{className:"px-6 py-4 text-xs font-semibold text-slate-700 uppercase tracking-wider",children:"Role"}),(0,b.jsx)("th",{className:"px-6 py-4 text-xs font-semibold text-slate-700 uppercase tracking-wider",children:"Status"}),(0,b.jsx)("th",{className:"px-6 py-4 text-xs font-semibold text-slate-700 uppercase tracking-wider",children:"Santri ID"}),(0,b.jsx)("th",{className:"px-6 py-4 text-xs font-semibold text-slate-700 uppercase tracking-wider",children:"Tgl Dibuat"}),(0,b.jsx)("th",{className:"px-6 py-4 text-xs font-semibold text-slate-700 uppercase tracking-wider text-right",children:"Aksi"})]})}),(0,b.jsx)("tbody",{className:"divide-y divide-slate-100 bg-white",children:s?[1,2,3].map(a=>(0,b.jsx)("tr",{className:"animate-pulse",children:(0,b.jsx)("td",{colSpan:6,className:"px-6 py-8 text-center text-slate-500",children:"Memuat data..."})},a)):0===a.length?(0,b.jsx)("tr",{children:(0,b.jsx)("td",{colSpan:6,className:"px-6 py-12 text-center text-slate-500",children:"Belum ada user terdaftar."})}):a.map(a=>(0,b.jsxs)("tr",{className:`hover:bg-slate-50/80 transition-colors group ${!a.is_active?"opacity-60":""}`,children:[(0,b.jsx)("td",{className:"px-6 py-4",children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:`w-10 h-10 rounded-full flex items-center justify-center font-semibold text-sm text-white shadow-sm ring-2 ${a.is_active?"bg-gradient-to-br from-emerald-600 to-emerald-700 ring-emerald-100":"bg-gradient-to-br from-slate-400 to-slate-500 ring-slate-200"}`,children:a.full_name?.charAt(0)||"?"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-semibold text-slate-900",children:a.full_name||"N/A"}),(0,b.jsxs)("p",{className:"text-xs text-slate-500 font-mono",children:[a.id.slice(0,8),"..."]})]})]})}),(0,b.jsx)("td",{className:"px-6 py-4",children:(0,b.jsx)("span",{className:B("inline-flex items-center text-xs font-semibold px-3 py-1.5 rounded-full border",a.roles?.slug==="superadmin"?"bg-emerald-100 text-emerald-800 border-emerald-200":a.roles?.slug==="operator"?"bg-amber-50 text-amber-700 border-amber-200":a.roles?.slug==="pengajar"?"bg-blue-50 text-blue-700 border-blue-200":a.roles?.slug==="santri"?"bg-slate-100 text-slate-700 border-slate-200":"bg-slate-50 text-slate-600 border-slate-200"),children:a.roles?.name||"Tidak ada role"})}),(0,b.jsx)("td",{className:"px-6 py-4",children:(0,b.jsx)("span",{className:B("inline-flex items-center text-xs font-semibold px-3 py-1.5 rounded-full border",a.is_active?"bg-green-50 text-green-700 border-green-200":"bg-red-50 text-red-700 border-red-200"),children:a.is_active?"Aktif":"Nonaktif"})}),(0,b.jsx)("td",{className:"px-6 py-4",children:(0,b.jsx)("span",{className:"text-sm font-mono text-slate-700",children:a.santri_id||(0,b.jsx)("span",{className:"text-slate-400",children:"-"})})}),(0,b.jsx)("td",{className:"px-6 py-4",children:(0,b.jsx)("span",{className:"text-xs text-slate-600",children:new Date(a.created_at).toLocaleDateString("id-ID",{day:"numeric",month:"short",year:"numeric"})})}),(0,b.jsx)("td",{className:"px-6 py-4 text-right",children:(0,b.jsxs)("div",{className:"flex justify-end gap-2 relative",children:[a.roles?.slug==="operator"&&(0,b.jsx)("button",{onClick:()=>{D(a),F(null)},className:"p-2 text-slate-600 hover:text-amber-600 transition-colors bg-white rounded-lg border border-slate-200 hover:border-amber-300 hover:bg-amber-50 shadow-sm",title:"Atur Hak Akses",children:(0,b.jsx)(l,{className:"w-4 h-4"})}),(0,b.jsxs)("div",{className:"relative",ref:b=>{G.current[a.id]=b},children:[(0,b.jsx)("button",{onClick:()=>F(E===a.id?null:a.id),className:"p-2 text-slate-600 hover:text-emerald-700 transition-colors bg-white rounded-lg border border-slate-200 hover:border-emerald-300 hover:bg-emerald-50 shadow-sm",children:(0,b.jsx)(k,{className:"w-4 h-4"})}),E===a.id&&(0,b.jsxs)("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg border border-slate-200 z-10 overflow-hidden",children:[(0,b.jsxs)("button",{onClick:()=>{A(a),F(null)},className:"w-full px-4 py-2 text-left text-sm text-slate-700 hover:bg-slate-50 flex items-center gap-2",children:[(0,b.jsx)(m.Edit,{className:"w-4 h-4"}),"Edit User"]}),(0,b.jsx)("button",{onClick:()=>K(a),className:"w-full px-4 py-2 text-left text-sm text-slate-700 hover:bg-slate-50 flex items-center gap-2",children:a.is_active?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(o,{className:"w-4 h-4"}),"Nonaktifkan"]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(n,{className:"w-4 h-4"}),"Aktifkan"]})}),(0,b.jsxs)("button",{onClick:()=>L(a),className:"w-full px-4 py-2 text-left text-sm text-red-600 hover:bg-red-50 flex items-center gap-2",children:[(0,b.jsx)(p.Trash2,{className:"w-4 h-4"}),"Hapus"]})]})]})]})})]},a.id))})]})})})]}),w&&(0,b.jsx)(t,{roles:q,onClose:()=>x(!1),onSuccess:I}),y&&(0,b.jsx)(u,{user:y,roles:q,onClose:()=>A(null),onSuccess:I}),C&&(0,b.jsx)(z,{user:C,onClose:()=>D(null),onSuccess:I})]})}function B(...a){return a.filter(Boolean).join(" ")}a.s(["default",()=>A],12203)}];

//# sourceMappingURL=src_app_%28dashboard%29_users_page_tsx_88a7c382._.js.map