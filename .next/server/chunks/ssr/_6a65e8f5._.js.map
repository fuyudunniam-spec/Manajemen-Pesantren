{"version":3,"sources":["../../../../src/lib/actions/theme.ts","../../../../.next-internal/server/app/donasi/page/actions.js%20%28server%20actions%20loader%29"],"sourcesContent":["'use server';\r\n\r\nimport { createClient } from '@/lib/supabase/server';\r\nimport { revalidatePath } from 'next/cache';\r\n\r\nexport interface ThemeSettings {\r\n    primary_color: string;\r\n    secondary_color: string;\r\n    accent_color: string;\r\n    background_color: string;\r\n    foreground_color: string;\r\n    heading_font: string;\r\n    body_font: string;\r\n    border_radius: string;\r\n    sidebar_style: string;\r\n}\r\n\r\nexport async function getTheme(): Promise<ThemeSettings | null> {\r\n    const supabase = createClient();\r\n\r\n    const { data, error } = await supabase\r\n        .from('website_themes')\r\n        .select('*')\r\n        .eq('key', 'default')\r\n        .single();\r\n\r\n    if (error) {\r\n        console.error('Error fetching theme:', error);\r\n        return null;\r\n    }\r\n\r\n    return data as ThemeSettings;\r\n}\r\n\r\nexport async function updateTheme(theme: Partial<ThemeSettings>) {\r\n    const supabase = createClient();\r\n\r\n    const { data: { user } } = await supabase.auth.getUser();\r\n\r\n    if (!user) {\r\n        throw new Error('Unauthorized');\r\n    }\r\n\r\n    const { error } = await supabase\r\n        .from('website_themes')\r\n        .update({\r\n            ...theme,\r\n            updated_by: user.id,\r\n            updated_at: new Date().toISOString(),\r\n        })\r\n        .eq('key', 'default');\r\n\r\n    if (error) {\r\n        throw new Error(error.message);\r\n    }\r\n\r\n    // Revalidate all pages to apply new theme\r\n    revalidatePath('/', 'layout');\r\n\r\n    return { success: true };\r\n}\r\n\r\n","export {getTheme as '002c3c1ba4b3794b9f598d4bc16943f4eb8e725167'} from 'ACTIONS_MODULE0'\n"],"names":[],"mappings":"wDAEA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OAcO,eAAe,IAClB,IAAM,EAAW,CAAA,EAAA,EAAA,YAAA,AAAY,IAEvB,MAAE,CAAI,OAAE,CAAK,CAAE,CAAG,MAAM,EACzB,IAAI,CAAC,kBACL,MAAM,CAAC,KACP,EAAE,CAAC,MAAO,WACV,MAAM,UAEX,AAAI,GACA,IADO,IACC,KAAK,CAAC,wBAAyB,GAChC,MAGJ,CACX,CAEO,eAAe,EAAY,CAA6B,EAC3D,IAAM,EAAW,CAAA,EAAA,EAAA,YAAA,AAAY,IAEvB,CAAE,KAAM,MAAE,CAAI,CAAE,CAAE,CAAG,MAAM,EAAS,IAAI,CAAC,OAAO,GAEtD,GAAI,CAAC,EACD,IADO,EACD,AAAI,MAAM,gBAGpB,GAAM,OAAE,CAAK,CAAE,CAAG,MAAM,EACnB,IAAI,CAAC,kBACL,MAAM,CAAC,CACJ,GAAG,CAAK,CACR,WAAY,EAAK,EAAE,CACnB,WAAY,IAAI,OAAO,WAAW,EACtC,GACC,EAAE,CAAC,MAAO,WAEf,GAAI,EACA,KADO,CACD,AAAI,MAAM,EAAM,OAAO,EAMjC,MAFA,CAAA,EAAA,EAAA,cAAA,AAAc,EAAC,IAAK,UAEb,CAAE,SAAS,CAAK,CAC3B,0CA3CsB,EAiBA,IAjBA,CAAA,EAAA,EAAA,uBAAA,EAAA,EAAA,6CAAA,MAiBA,CAAA,EAAA,EAAA,uBAAA,EAAA,EAAA,6CAAA,0EClCtB,IAAA,EAAA,EAAA,CAAA,CAAA"}