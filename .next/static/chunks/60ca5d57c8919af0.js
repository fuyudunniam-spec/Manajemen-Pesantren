(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,19455,20783,91918,25913,e=>{"use strict";var t=e.i(43476),r=e.i(71645);function s(e,t){if("function"==typeof e)return e(t);null!=e&&(e.current=t)}function a(...e){return t=>{let r=!1,a=e.map(e=>{let a=s(e,t);return r||"function"!=typeof a||(r=!0),a});if(r)return()=>{for(let t=0;t<a.length;t++){let r=a[t];"function"==typeof r?r():s(e[t],null)}}}}function i(...e){return r.useCallback(a(...e),e)}function n(e){var s;let i,n=(s=e,(i=r.forwardRef((e,t)=>{let{children:s,...i}=e;if(r.isValidElement(s)){var n;let e,l,o=(n=s,(l=(e=Object.getOwnPropertyDescriptor(n.props,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?n.ref:(l=(e=Object.getOwnPropertyDescriptor(n,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?n.props.ref:n.props.ref||n.ref),d=function(e,t){let r={...t};for(let s in t){let a=e[s],i=t[s];/^on[A-Z]/.test(s)?a&&i?r[s]=(...e)=>{let t=i(...e);return a(...e),t}:a&&(r[s]=a):"style"===s?r[s]={...a,...i}:"className"===s&&(r[s]=[a,i].filter(Boolean).join(" "))}return{...e,...r}}(i,s.props);return s.type!==r.Fragment&&(d.ref=t?a(t,o):o),r.cloneElement(s,d)}return r.Children.count(s)>1?r.Children.only(null):null})).displayName=`${s}.SlotClone`,i),l=r.forwardRef((e,s)=>{let{children:a,...i}=e,l=r.Children.toArray(a),o=l.find(c);if(o){let e=o.props.children,a=l.map(t=>t!==o?t:r.Children.count(e)>1?r.Children.only(null):r.isValidElement(e)?e.props.children:null);return(0,t.jsx)(n,{...i,ref:s,children:r.isValidElement(e)?r.cloneElement(e,void 0,a):null})}return(0,t.jsx)(n,{...i,ref:s,children:a})});return l.displayName=`${e}.Slot`,l}e.s(["composeRefs",()=>a,"useComposedRefs",()=>i],20783);var l=n("Slot"),o=Symbol("radix.slottable");function d(e){let r=({children:e})=>(0,t.jsx)(t.Fragment,{children:e});return r.displayName=`${e}.Slottable`,r.__radixId=o,r}function c(e){return r.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===o}e.s(["Slot",()=>l,"createSlot",()=>n,"createSlottable",()=>d],91918);var u=e.i(7670);let f=e=>"boolean"==typeof e?`${e}`:0===e?"0":e,m=u.clsx,p=(e,t)=>r=>{var s;if((null==t?void 0:t.variants)==null)return m(e,null==r?void 0:r.class,null==r?void 0:r.className);let{variants:a,defaultVariants:i}=t,n=Object.keys(a).map(e=>{let t=null==r?void 0:r[e],s=null==i?void 0:i[e];if(null===t)return null;let n=f(t)||f(s);return a[e][n]}),l=r&&Object.entries(r).reduce((e,t)=>{let[r,s]=t;return void 0===s||(e[r]=s),e},{});return m(e,n,null==t||null==(s=t.compoundVariants)?void 0:s.reduce((e,t)=>{let{class:r,className:s,...a}=t;return Object.entries(a).every(e=>{let[t,r]=e;return Array.isArray(r)?r.includes({...i,...l}[t]):({...i,...l})[t]===r})?[...e,r,s]:e},[]),null==r?void 0:r.class,null==r?void 0:r.className)};e.s(["cva",0,p],25913);var h=e.i(75157);let x=p("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-lg text-sm font-medium ring-offset-background transition-all duration-200 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90 shadow-soft hover:shadow-card",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border-2 border-primary bg-transparent text-primary hover:bg-primary hover:text-primary-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80 shadow-soft",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline",hero:"bg-secondary text-secondary-foreground hover:bg-secondary/90 shadow-elevated hover:shadow-card font-semibold","hero-outline":"border-2 border-primary-foreground/30 bg-transparent text-primary-foreground hover:bg-primary-foreground/10 backdrop-blur-sm",gold:"bg-gradient-to-r from-secondary to-amber-500 text-secondary-foreground hover:from-secondary/90 hover:to-amber-500/90 shadow-card font-semibold"},size:{default:"h-10 px-5 py-2",sm:"h-9 rounded-md px-3",lg:"h-12 rounded-lg px-8 text-base",xl:"h-14 rounded-xl px-10 text-lg",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),g=r.forwardRef(({className:e,variant:r,size:s,asChild:a=!1,...i},n)=>(0,t.jsx)(a?l:"button",{className:(0,h.cn)(x({variant:r,size:s,className:e})),ref:n,...i}));g.displayName="Button",e.s(["Button",()=>g,"buttonVariants",()=>x],19455)},15288,e=>{"use strict";var t=e.i(43476),r=e.i(71645),s=e.i(75157);let a=r.forwardRef(({className:e,...r},a)=>(0,t.jsx)("div",{ref:a,className:(0,s.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...r}));a.displayName="Card";let i=r.forwardRef(({className:e,...r},a)=>(0,t.jsx)("div",{ref:a,className:(0,s.cn)("flex flex-col space-y-1.5 p-6",e),...r}));i.displayName="CardHeader";let n=r.forwardRef(({className:e,...r},a)=>(0,t.jsx)("h3",{ref:a,className:(0,s.cn)("text-2xl font-semibold leading-none tracking-tight",e),...r}));n.displayName="CardTitle";let l=r.forwardRef(({className:e,...r},a)=>(0,t.jsx)("p",{ref:a,className:(0,s.cn)("text-sm text-muted-foreground",e),...r}));l.displayName="CardDescription";let o=r.forwardRef(({className:e,...r},a)=>(0,t.jsx)("div",{ref:a,className:(0,s.cn)("p-6 pt-0",e),...r}));o.displayName="CardContent",r.forwardRef(({className:e,...r},a)=>(0,t.jsx)("div",{ref:a,className:(0,s.cn)("flex items-center p-6 pt-0",e),...r})).displayName="CardFooter",e.s(["Card",()=>a,"CardContent",()=>o,"CardDescription",()=>l,"CardHeader",()=>i,"CardTitle",()=>n])},81418,e=>{"use strict";let t=(0,e.i(75254).default)("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);e.s(["ShieldCheck",()=>t],81418)},56272,52044,e=>{"use strict";var t=e.i(75254);let r=(0,t.default)("SquareCheckBig",[["path",{d:"M21 10.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.5",key:"1uzm8b"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);e.s(["CheckSquare",()=>r],56272);let s=(0,t.default)("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);e.s(["Square",()=>s],52044)},79332,e=>{"use strict";var t=e.i(43476),r=e.i(71645),s=e.i(11795),a=e.i(15288),i=e.i(19455),n=e.i(81418),l=e.i(56272),o=e.i(52044);let d=[{slug:"keuangan",name:"Keuangan",description:"Tabungan, SPP, & Pembayaran"},{slug:"akademik",name:"Akademik",description:"Kurikulum & Data Nilai"},{slug:"donasi",name:"Donasi",description:"Manajemen Donatur & Infaq"},{slug:"inventory",name:"Inventory",description:"Aset & Inventaris Pondok"},{slug:"kesehatan",name:"Kesehatan",description:"Catatan Medis Santri"}];function c(){let[e,c]=(0,r.useState)([]),[f,m]=(0,r.useState)(null),[p,h]=(0,r.useState)([]),[x,g]=(0,r.useState)(!0),[v,b]=(0,r.useState)(!1),y=(0,s.createClient)();(0,r.useEffect)(()=>{!async function(){let{data:e}=await y.from("profiles").select("*, roles!inner(*)").eq("roles.slug","operator");e&&c(e),g(!1)}()},[]),(0,r.useEffect)(()=>{f&&async function(){let{data:e}=await y.from("user_permissions").select("permissions(slug)").eq("user_id",f.id);e?h(e.map(e=>e.permissions.slug)):h([])}()},[f]);let j=async()=>{if(!f)return;b(!0),await y.from("user_permissions").delete().eq("user_id",f.id);let{data:e}=await y.from("permissions").select("id, slug").in("slug",p);if(e&&e.length>0){let t=e.map(e=>({user_id:f.id,permission_id:e.id}));await y.from("user_permissions").insert(t)}b(!1),alert("Permissions updated successfully!")};return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-display font-bold text-white",children:"Settings Operator"}),(0,t.jsx)("p",{className:"text-white/50",children:"Atur hak akses modul untuk setiap personil Operator"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,t.jsxs)(a.Card,{className:"glass-card",children:[(0,t.jsx)(a.CardHeader,{children:(0,t.jsx)("h3",{className:"text-sm font-bold text-white uppercase tracking-widest",children:"Daftar Operator"})}),(0,t.jsx)(a.CardContent,{className:"p-0",children:(0,t.jsxs)("div",{className:"divide-y divide-white/5",children:[e.map(e=>(0,t.jsxs)("button",{onClick:()=>m(e),className:u("w-full text-left p-4 transition-colors hover:bg-white/5 flex items-center gap-3",f?.id===e.id?"bg-white/10 border-r-2 border-gold-400":""),children:[(0,t.jsx)("div",{className:"w-8 h-8 rounded-full bg-blue-500/20 flex items-center justify-center text-blue-400 font-bold text-xs uppercase",children:e.full_name?.charAt(0)}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-bold text-white",children:e.full_name}),(0,t.jsx)("p",{className:"text-[10px] text-white/40",children:e.email})]})]},e.id)),0===e.length&&!x&&(0,t.jsx)("p",{className:"p-4 text-xs italic text-white/30 text-center",children:"Belum ada user Operator."})]})})]}),(0,t.jsxs)(a.Card,{className:"lg:col-span-2 glass-card",children:[(0,t.jsxs)(a.CardHeader,{className:"flex flex-row items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-sm font-bold text-white uppercase tracking-widest",children:"Akses Modul"}),f&&(0,t.jsxs)("p",{className:"text-xs text-gold-400 mt-1",children:["Mengatur: ",f.full_name]})]}),(0,t.jsx)(i.Button,{variant:"gold",size:"sm",onClick:j,disabled:!f||v,children:v?"Menyimpan...":"Simpan Perubahan"})]}),(0,t.jsx)(a.CardContent,{children:f?(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:d.map(e=>{let r=p.includes(e.slug);return(0,t.jsxs)("button",{onClick:()=>{var t;return t=e.slug,void h(e=>e.includes(t)?e.filter(e=>e!==t):[...e,t])},className:u("flex items-start gap-4 p-4 rounded-xl border transition-all text-left group",r?"bg-gold-500/10 border-gold-400/30 text-white":"bg-white/5 border-white/5 text-white/50 hover:border-white/20"),children:[(0,t.jsx)("div",{className:"mt-1",children:r?(0,t.jsx)(l.CheckSquare,{className:"w-5 h-5 text-gold-400"}):(0,t.jsx)(o.Square,{className:"w-5 h-5 text-white/10 group-hover:text-white/30"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:u("text-sm font-bold",r?"text-gold-400":"text-white"),children:e.name}),(0,t.jsx)("p",{className:"text-[10px] leading-relaxed mt-1",children:e.description})]})]},e.slug)})}):(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center py-20 text-white/20",children:[(0,t.jsx)(n.ShieldCheck,{className:"w-16 h-16 mb-4 opacity-5"}),(0,t.jsx)("p",{children:"Pilih operator untuk mengatur hak akses"})]})})]})]})]})}function u(...e){return e.filter(Boolean).join(" ")}e.s(["MODULE_REGISTRY",0,d,"default",()=>c])}]);