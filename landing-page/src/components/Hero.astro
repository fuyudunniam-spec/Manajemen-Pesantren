---
interface Props {
  title?: string;
  subtitle?: string;
  ctaText?: string;
  ctaLink?: string;
  secondaryCtaText?: string;
  secondaryCtaLink?: string;
  backgroundImage?: string;
  heroImage?: string;
  layout?: 'split-right' | 'center' | 'split-left';
}

const { 
  title = "Membangun Peradaban Melalui Kemandirian", 
  subtitle = "Platform filantropi Islam yang transparan, menggabungkan pendidikan pesantren modern dengan akuntabilitas digital.",
  ctaText = "Lihat Impact Fund",
  ctaLink = "#impact-fund",
  secondaryCtaText = "Pelajari Program Kami",
  secondaryCtaLink = "#programs",
  backgroundImage,
  heroImage,
  layout = 'split-right'
} = Astro.props;

const isCenter = layout === 'center';
const isSplit = layout === 'split-right' || layout === 'split-left';
const reverse = layout === 'split-left';
---

<section class={`relative min-h-[90vh] md:min-h-screen flex items-center overflow-hidden bg-primary text-white pt-28 pb-16 md:pt-0 md:pb-0 ${isCenter ? 'justify-center text-center' : ''}`}>
  
  <!-- Background Pattern / Overlay -->
  {backgroundImage && isCenter ? (
    <div 
      class="absolute inset-0 bg-cover bg-center" 
      style={`background-image: url(${backgroundImage})`}
    ></div>
  ) : (
    <div class="absolute inset-0 bg-[url('/hero-pattern.svg')] opacity-10 mix-blend-overlay pointer-events-none"></div>
  )}
  
  <!-- Gradient Overlay -->
  <div class={`absolute inset-0 bg-gradient-to-b from-primary via-primary/95 to-primary/90 ${isCenter ? 'opacity-80' : 'opacity-100'} pointer-events-none`}></div>
  
  <!-- Accent Glow -->
  <div class="absolute top-0 right-0 w-[300px] h-[300px] md:w-[600px] md:h-[600px] bg-secondary/10 rounded-full blur-[80px] md:blur-[120px] -translate-y-1/2 translate-x-1/2 pointer-events-none"></div>
  <div class="absolute bottom-0 left-0 w-[200px] h-[200px] md:w-[400px] md:h-[400px] bg-blue-500/10 rounded-full blur-[60px] md:blur-[100px] translate-y-1/2 -translate-x-1/3 pointer-events-none"></div>

  <div class={`relative z-10 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 w-full ${isSplit ? 'grid grid-cols-1 lg:grid-cols-2 gap-12 lg:gap-20 items-center' : ''}`}>
    
    <!-- Text Content -->
    <div class={`space-y-6 md:space-y-8 ${reverse && isSplit ? 'order-2' : ''} ${isCenter ? 'max-w-4xl mx-auto' : ''}`}>
       <div class="inline-flex items-center gap-2 border border-secondary/30 bg-secondary/5 rounded-full px-3 py-1.5 md:px-4 md:py-1.5 backdrop-blur-sm animate-fade-in-up">
        <span class="w-1.5 h-1.5 rounded-full bg-secondary"></span>
        <span class="text-secondary tracking-widest text-[10px] md:text-xs uppercase font-medium">Wakaf Produktif Series 2024</span>
        <span class="w-1.5 h-1.5 rounded-full bg-secondary"></span>
      </div>

      <h1 
        class="font-serif text-4xl md:text-6xl lg:text-7xl leading-[1.2] md:leading-[1.1] font-bold tracking-tight animate-fade-in-up delay-100"
        set:html={title}
      />

      <div class={`${isCenter ? 'mx-auto' : ''} h-px w-20 bg-secondary/50 animate-fade-in-up delay-200`}></div>

      <p class={`font-sans text-base md:text-xl text-gray-300 ${isCenter ? 'mx-auto' : ''} max-w-xl leading-relaxed animate-fade-in-up delay-200`}>
        {subtitle}
      </p>

      <div class={`flex flex-col sm:flex-row items-center gap-4 pt-4 animate-fade-in-up delay-300 ${isCenter ? 'justify-center' : ''}`}>
        <a href={ctaLink} class="w-full sm:w-auto text-center bg-secondary hover:bg-secondary/90 text-white px-8 py-4 rounded-full font-medium transition-all duration-300 shadow-lg hover:shadow-secondary/20 hover:-translate-y-1 uppercase tracking-wide text-sm">
          {ctaText}
        </a>
        <a href={secondaryCtaLink} class="w-full sm:w-auto text-center border border-white/20 hover:bg-white/5 text-white px-8 py-4 rounded-full font-medium transition-all duration-300 flex items-center justify-center gap-2 uppercase tracking-wide text-sm group">
           <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-5 h-5 group-hover:scale-110 transition-transform"><circle cx="12" cy="12" r="10"/><polygon points="10 8 16 12 10 16"/></svg>
           <span>{secondaryCtaText}</span>
        </a>
      </div>
    </div>

    <!-- Image Content (Only for Split Layout) -->
    {isSplit && (
      <div class={`relative ${reverse ? 'order-1' : ''} hidden lg:block animate-fade-in-up delay-300 group/image-box`}>
        <div class="relative rounded-[2.5rem] overflow-hidden border border-white/10 shadow-2xl transition-transform duration-500 group-hover/image-box:-translate-y-2">
            {heroImage ? (
                 <img 
                src={heroImage} 
                alt="Hero Image" 
                class="w-full h-auto object-cover grayscale opacity-70 group-hover/image-box:grayscale-0 group-hover/image-box:opacity-100 group-active/image-box:grayscale-0 transition-all duration-1000 ease-in-out scale-110 group-hover/image-box:scale-100"
                />
            ) : (
                <div class="w-full h-[600px] bg-slate-800 flex items-center justify-center">
                    <span class="text-white/20">Isyraq Annur</span>
                </div>
            )}
           
            <div class="absolute inset-0 bg-gradient-to-t from-primary/60 to-transparent group-hover/image-box:opacity-0 transition-opacity duration-700"></div>
        </div>
        
        <!-- Decoration Borders - Dynamic on Hover -->
        <div class="absolute -top-4 -right-4 w-full h-full border-2 border-secondary/20 rounded-[3rem] -z-10 transition-all duration-500 group-hover/image-box:-top-8 group-hover/image-box:-right-8 group-hover/image-box:border-secondary/50 group-hover/image-box:rotate-2"></div>
        <div class="absolute -bottom-4 -left-4 w-full h-full border border-blue-500/10 rounded-[3rem] -z-20 transition-all duration-700 group-hover/image-box:-bottom-8 group-hover/image-box:-left-8 group-hover/image-box:border-blue-500/30 group-hover/image-box:-rotate-1"></div>
        
        <!-- Interactive Glow -->
        <div class="absolute inset-0 bg-secondary/20 blur-[100px] opacity-0 group-hover/image-box:opacity-100 transition-opacity duration-1000 -z-30"></div>
      </div>
    )}

  </div>
  
  <!-- Scroll Indicator -->
  <div class="absolute bottom-8 left-1/2 -translate-x-1/2 animate-bounce hidden md:block">
    <span class="block w-[1px] h-12 bg-gradient-to-b from-transparent via-secondary to-transparent"></span>
  </div>
</section>

<style>
  .animate-fade-in-up {
    animation: fadeInUp 1s ease-out forwards;
    opacity: 0;
    transform: translateY(20px);
  }
  
  .delay-100 { animation-delay: 0.15s; }
  .delay-200 { animation-delay: 0.3s; }
  .delay-300 { animation-delay: 0.45s; }

  @keyframes fadeInUp {
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
</style>
