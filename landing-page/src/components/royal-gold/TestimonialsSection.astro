---
// Testimonials Section
const { testimonials } = Astro.props;
---

{testimonials && testimonials.testimonialsList && testimonials.testimonialsList.length > 0 && (
    <section class="py-24 royal-pattern">
        <div class="max-w-7xl mx-auto px-6">
            <!-- Header -->
            <div class="text-center mb-16 fade-up">
                {testimonials.badge && (
                    <span class="inline-block px-4 py-1 bg-royal-900 text-gold-400 text-[10px] uppercase tracking-[0.3em] mb-6 rounded">
                        {testimonials.badge}
                    </span>
                )}
                
                {testimonials.title && (
                    <h2 class="text-4xl md:text-5xl font-display font-bold text-royal-950">
                        {testimonials.title}
                    </h2>
                )}
            </div>
            
            <!-- Testimonials Grid -->
            <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-8">
                {testimonials.testimonialsList.map((testimonial: any, index: number) => (
                    <div 
                        class:list={[
                            "glass-panel p-8 rounded-2xl hover:shadow-2xl transition-all duration-300 fade-up",
                            `delay-${(index % 3) * 100}`
                        ]}
                    >
                        <!-- Quote -->
                        <div class="mb-6">
                            <i data-lucide="quote" class="w-10 h-10 text-gold-400 mb-4"></i>
                            <p class="text-stone-700 leading-relaxed italic">
                                "{testimonial.quote}"
                            </p>
                        </div>
                        
                        <!-- Author -->
                        <div class="flex items-center gap-4 pt-6 border-t border-stone-200">
                            {testimonial.avatar?.asset ? (
                                <img 
                                    src={`${testimonial.avatar.asset.url}?w=100&h=100&fit=crop`}
                                    alt={testimonial.avatar.alt || testimonial.name}
                                    class="w-12 h-12 rounded-full object-cover border-2 border-royal-900"
                                />
                            ) : (
                                <div class="w-12 h-12 rounded-full bg-royal-900 flex items-center justify-center text-white font-bold">
                                    {testimonial.name?.charAt(0) || 'A'}
                                </div>
                            )}
                            
                            <div>
                                <p class="font-bold text-royal-900">{testimonial.name}</p>
                                <p class="text-sm text-stone-600">{testimonial.role}</p>
                            </div>
                        </div>
                    </div>
                ))}
            </div>
        </div>
    </section>
)}

<script>
    if (typeof lucide !== 'undefined') {
        lucide.createIcons();
    }
</script>
