---
import AcademyLayout from '../layouts/AcademyLayout.astro';
import { sanityFetch, urlFor } from '../lib/sanity';

// Query to fetch instructors
const query = `*[_type == "instructor"]{
  name,
  role,
  bio,
  expertises,
  photo,
  socialLinks
}`;

const instructorsData = await sanityFetch<any[]>(query);

// Fallback data matching the seed guide
const instructors = instructorsData || [
    {
        name: "KH. Ahmad Bisri",
        role: "Pakar Tafsir & Hadis",
        bio: "Pakar Tafsir & Hadis dengan pengalaman mengajar lebih dari 20 tahun di berbagai pesantren.",
        expertises: ["Tafsir", "Hadis", "Ulum Al-Quran"],
        photo: null
    },
    {
        name: "Ustadz Fulan Al-Azhari",
        role: "Ahli Peradaban Islam",
        bio: "Lulusan Al-Azhar University dengan spesialisasi dalam Sejarah Peradaban Islam dan Bahasa Arab.",
        expertises: ["Sejarah Islam", "Bahasa Arab", "Peradaban"],
        photo: null
    },
    {
        name: "Dr. Aminah",
        role: "Dosen Bahasa Arab",
        bio: "Dosen Bahasa Arab dengan fokus pada metodologi pengajaran bahasa Arab modern.",
        expertises: ["Bahasa Arab", "Nahwu", "Sharaf"],
        photo: null
    }
];
---

<AcademyLayout title="Pengajar & Ulama | Isyraq Academy">
    <section class="bg-emerald-950 py-24 relative overflow-hidden px-6">
        <div class="absolute inset-0 opacity-10" style="background-image: url('https://www.transparenttextures.com/patterns/arabesque.png');"></div>
        <div class="max-w-7xl mx-auto relative z-10 text-center">
            <span class="text-emerald-400 font-bold uppercase tracking-[0.2em] text-[10px] mb-4 block">Dewan Guru</span>
            <h1 class="text-5xl md:text-6xl font-display text-white mb-6">
                Para Pewaris <span class="italic text-yellow-500">Nabi</span>
            </h1>
            <p class="text-emerald-200 max-w-2xl mx-auto leading-relaxed text-lg">
                Belajarlah langsung dari para ahli yang memiliki sanad keilmuan yang jelas dan dedikasi tinggi dalam pendidikan umat.
            </p>
        </div>
    </section>

    <section class="py-24 bg-stone-50 px-6">
        <div class="max-w-7xl mx-auto">
            <div class="grid md:grid-cols-3 gap-8">
                {instructors.map((instructor) => (
                    <div class="bg-white rounded-3xl overflow-hidden border border-stone-200 hover:shadow-xl transition duration-500 group">
                        <div class="aspect-square bg-emerald-100 relative overflow-hidden">
                            {instructor.photo ? (
                                <img 
                                    src={urlFor(instructor.photo).width(400).height(400).url()} 
                                    alt={instructor.name}
                                    class="w-full h-full object-cover group-hover:scale-105 transition duration-700"
                                />
                            ) : (
                                <div class="w-full h-full flex items-center justify-center bg-emerald-900 text-emerald-700">
                                    <span class="text-8xl font-display opacity-20">{instructor.name[0]}</span>
                                </div>
                            )}
                            <div class="absolute bottom-0 left-0 right-0 p-6 bg-gradient-to-t from-emerald-950/90 to-transparent pt-20">
                                <h3 class="text-white font-display text-2xl">{instructor.name}</h3>
                                <p class="text-emerald-300 text-xs font-bold uppercase tracking-widest mt-1">{instructor.role}</p>
                            </div>
                        </div>
                        <div class="p-8">
                            <div class="flex flex-wrap gap-2 mb-6">
                                {instructor.expertises?.map((skill: string) => (
                                    <span class="px-3 py-1 bg-stone-100 text-stone-600 text-[10px] font-bold uppercase tracking-wider rounded-full">
                                        {skill}
                                    </span>
                                ))}
                            </div>
                            <p class="text-stone-600 leading-relaxed mb-6 text-sm">
                                {instructor.bio}
                            </p>
                        </div>
                    </div>
                ))}
            </div>
        </div>
    </section>

    <section class="py-24 bg-white px-6 border-t border-stone-100">
        <div class="max-w-5xl mx-auto text-center">
            <div class="w-20 h-20 bg-yellow-100 rounded-full flex items-center justify-center mx-auto mb-8">
                <i data-lucide="mic-2" class="w-10 h-10 text-yellow-600"></i>
            </div>
            <h2 class="text-3xl font-display text-emerald-950 mb-6">Bergabung Sebagai Pengajar</h2>
            <p class="text-stone-600 max-w-2xl mx-auto mb-12">
                Apakah Anda memiliki kualifikasi keilmuan dan semangat untuk berbagi? Mari bergabung dalam misi kami mencerdaskan umat.
            </p>
            <a href="/hubungi-kami" class="px-8 py-4 bg-emerald-900 text-white font-bold uppercase tracking-widest text-xs rounded-full hover:bg-emerald-800 transition">
                Ajukan Diri
            </a>
        </div>
    </section>
</AcademyLayout>
